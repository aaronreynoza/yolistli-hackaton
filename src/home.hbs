{{> hbs/templates/default }}

{{> preloader }}

<a-scene stats renderer="antialias: false;
             gammaOutput: true;
             sortObjects: true;
             physicallyCorrectLights: true"
         data-is-home="true"
         teleport-refresh
         vr-mode-ui="enabled: true"
         preloader>

    {{!-- Asset management system. --}}
    <a-assets>
        <a-asset-item id="scenario" src="{{ asset "models/ground/ground.gltf" }}"></a-asset-item>
        <img id="pyramid" src="{{ asset "img/portal/altar_small.jpg" }}">
        <img id="pyramid" src="{{ asset "img/portal/climb_small.jpg" }}">
        <img id="pyramid" src="{{ asset "img/portal/internal_field_small.jpg" }}">
        <img id="pyramid" src="{{ asset "img/portal/museum_small.jpg" }}">
        <img id="pyramid" src="{{ asset "img/portal/outside_field1_small.jpg" }}">
        <img id="pyramid" src="{{ asset "img/portal/outside_field2_small.jpg" }}">
        <img id="pyramid" src="{{ asset "img/portal/pyramid_small.jpg" }}">
        <img id="portalImg" src="{{ asset "img/portal.png" }}">
        <img id="shadowImg" src="{{ asset "img/shadow.png" }}">
        <img id="sliceImg" src="{{ asset "img/slice.png" }}">

        {{!-- Mixins --}}
        {{> hand-mixin }}
        {{> portal-mixins}}
    </a-assets>

    {{!-- Nav Mesh --}}
    <a-entity ground gltf-model="{{ asset "models/ground/navmesh.gltf" }}" nav-mesh visible="false"></a-entity>

    <a-light color="white" position="-1 1 0" intensity="3"></a-light>

    {{!-- Scene. --}}
    <a-entity id="cameraRig">
        <a-entity id="head" position="0 1.6 0" camera look-controls="pointerLockEnabled:true">
            {{!-- Control for Web and Mobile --}}
            {{> non-vr-control }}
            <a-entity id="teleportFader" geometry="primitive: box" material="color: #111; shader: flat; side: back" visible="false"></a-entity>
        </a-entity>

        {{> teleport-controls }}
    </a-entity>

    {{!-- Main scenario --}}
    {{!-- <a-entity gltf-model="#scenario" position="7 -13 0"></a-entity> --}}

    {{!-- Main scenario --}}
    <a-entity gltf-model="#scenario" position="200 -10 -100"></a-entity>

    {{!-- Portals --}}
    {{> portal id="pyramid-portal"
        href="portals/pyramid.html"
        img="assets/img/portal/pyramid_small.jpg"
        name="Piramide"
        position="-9 0 3" }}

    {{> portal id="altar-portal"
        href="portals/altar.html"
        img="assets/img/portal/altar_small.jpg"
        name="Altar"
        position="-6 0 -2" }}

    {{> portal id="climb-portal"
        href="portals/climb.html"
        img="assets/img/portal/climb_small.jpg"
        name="Ascenso"
        position="-2 0 -6" }}

    {{> portal id="internal-field-portal"
        href="portals/internal-field.html"
        img="assets/img/portal/internal_field_small.jpg"
        name="Campo Interno"
        position="-5 0 -5" }}

    {{> portal id="museum-portal"
        href="portals/museum.html"
        img="assets/img/portal/museum_small.jpg"
        name="Museo"
        position="5 0 0" }}

    {{> portal id="outside-field1-portal"
        href="portals/outside-field1.html"
        img="assets/img/portal/outside_field1_small.jpg"
        name="Cancha Afuera"
        position="-2 0 -12" }}

    {{> portal id="outside-field2-portal"
        href="portals/outside-field2.html"
        img="assets/img/portal/outside_field2_small.jpg"
        name="Cancha Afuera"
        position="-7 0 3" }}

</a-scene>
