{{> hbs/templates/default }}

{{> preloader }}

<a-scene renderer="antialias: true;
             gammaOutput: true;
             sortObjects: true;
             physicallyCorrectLights: true"
    data-is-home="true" teleport-refresh vr-mode-ui="enabled: true" preloader>

    {{!-- Asset management system. --}}
    <a-assets>
        <a-asset-item id="fan" src="{{ asset "models/museo/fan.gltf" }}"></a-asset-item>
        <a-asset-item id="museo" src="{{ asset "models/museo/Museum.gltf" }}"></a-asset-item>
        <a-asset-item id="cancha" src="{{ asset "models/objetos/cancha.gltf" }}"></a-asset-item>
        <a-asset-item id="scenario" src="{{ asset "models/ground/ground.gltf" }}"></a-asset-item>
        <a-asset-item id="chuchito" src="{{ asset "models/objetos/chuchito.gltf" }}"></a-asset-item>
        <a-asset-item id="craneo" src="{{ asset "models/objetos/craneo.gltf" }}"></a-asset-item>
        <a-asset-item id="incenierario" src="{{ asset "models/objetos/incenierario.gltf" }}"></a-asset-item>
        <a-asset-item id="jaguar" src="{{ asset "models/objetos/jaguar.gltf" }}"></a-asset-item>
        <a-asset-item id="maniqui" src="{{ asset "models/objetos/maniqui.gltf" }}"></a-asset-item>
        <a-asset-item id="mascara" src="{{ asset "models/objetos/mascara.gltf" }}"></a-asset-item>
        <a-asset-item id="mascaracraneo" src="{{ asset "models/objetos/mascaracraneo.gltf" }}"></a-asset-item>
        <a-asset-item id="mazapan" src="{{ asset "models/objetos/mazapan.gltf" }}"></a-asset-item>
        <a-asset-item id="PistadeBaile" src="{{ asset "models/objetos/PistadeBaile.gltf" }}"></a-asset-item>
        <a-asset-item id="PolicromoBanderas" src="{{ asset "models/objetos/PolicromoBanderas.gltf" }}"></a-asset-item>
        <a-asset-item id="puntaflecha" src="{{ asset "models/objetos/puntaflecha.gltf" }}"></a-asset-item>
        <a-asset-item id="ranchito" src="{{ asset "models/objetos/ranchito.gltf" }}"></a-asset-item>
        <a-asset-item id="piramide" src="{{ asset "models/objetos/piramide.gltf" }}"></a-asset-item>
        <img id="altar_small" src="{{ asset "img/portal/altar_small.jpg" }}">
        <img id="climb_small" src="{{ asset "img/portal/climb_small.jpg" }}">
        <img id="internal_field_small" src="{{ asset "img/portal/internal_field_small.jpg" }}">
        <img id="museum_small" src="{{ asset "img/portal/museum_small.jpg" }}">
        <img id="outside_field1_small" src="{{ asset "img/portal/outside_field1_small.jpg" }}">
        <img id="outside_field2_small" src="{{ asset "img/portal/outside_field2_small.jpg" }}">
        <img id="pyramid_small" src="{{ asset "img/portal/pyramid_small.jpg" }}">
        <img id="portalImg" src="{{ asset "img/portal.png" }}">
        <img id="shadowImg" src="{{ asset "img/shadow.png" }}">
        <img id="sliceImg" src="{{ asset "img/slice.png" }}">

        {{!-- Mixins --}}
        {{> hand-mixin }}
        {{> portal-mixins}}
    </a-assets>

    <a-light color="white" position="-1 30 0" intensity="1.4"></a-light>

    {{!-- Scene. --}}
    <a-entity id="cameraRig">
        <a-entity id="head" position="0 1.6 0" camera look-controls="pointerLockEnabled:true">
            {{!-- Control for Web and Mobile --}}
            {{> non-vr-control }}
            <a-entity id="teleportFader" geometry="primitive: box" material="color: #111; shader: flat; side: back"
                visible="false"></a-entity>
        </a-entity>

        {{> teleport-controls }}
    </a-entity>

    <a-sky color="#0e1111"></a-sky>
    <a-entity star-system>
        <a-animation attribute="rotation" easing="linear" dur="250000" to="360 360 0" repeat="indefinite"></a-animation>
    </a-entity>

    {{!-- Main scenario --}}
    <a-entity ground gltf-model="#scenario" position="200 -10 -100"></a-entity>

    {{!-- Walkable objects --}}
    <a-entity gltf-model="#piramide" ground position="-275.849 -13.777 -163.606" scale="0.1 0.1 0.1" rotate="0 90 0"></a-entity>
    <a-entity gltf-model="#cancha" ground position="-464 -14.3 14" scale="0.1 0.1 0.1"></a-entity>
    <a-entity gltf-model="#cancha" ground position="46.766 -14.609 -641.964" rotation="0 90 0" scale="0.1 0.1 0.1"></a-entity>
    <a-entity gltf-model="#PistadeBaile" ground position="27.745 -16.195 -289.920" scale="0.085 0.04 0.085"></a-entity>

    {{!-- Museum objects! --}}
    <a-entity gltf-model="#museo" position="125.426 -8.653 -143.146" rotation="0 270 0" scale="1.5 1.5 1.5"></a-entity>
    <a-entity gltf-model="#mascara" position="139 -8.881 -140.187" rotation="0 270.000 0" scale="0.085 0.04 0.085"></a-entity>
    <a-entity gltf-model="#mascaracraneo" position="126.425 -8.653 -138.078" rotation="0 180 0" scale="0.085 0.04 0.085"></a-entity>
    <a-entity gltf-model="#mazapan" position="126.425 -8.653 -143.078" scale="0.085 0.04 0.085">
        <a-animation attribute="rotation" dur="3000" to="0 360 0" repeat="indefinite"></a-animation>
    </a-entity>
    <a-entity gltf-model="#chuchito" position="134.699 -8.881 -146.954" rotation="0 90 0" scale="0.05 0.05 0.05">
        <a-animation attribute="rotation" dur="3000" to="0 450 0" repeat="indefinite"></a-animation>
    </a-entity>
    <a-entity gltf-model="#craneo" position="138.910 -8.881 -147.542" rotation="0 270 0" scale="0.085 0.04 0.085">
        <a-animation attribute="rotation" dur="3000" to="0 -90 0" repeat="indefinite"></a-animation>
    </a-entity>
    <a-entity gltf-model="#jaguar" position="131.728 -8.828 -143.286" scale="0.02 0.02 0.02">
        <a-animation attribute="rotation" dur="3000" to="0 360 0" repeat="indefinite"></a-animation>
    </a-entity>
    {{!-- Objects --}}
    <a-sphere radius="5" emissive="white" position="0 150 0" scale="2 2 2"></a-sphere>
    <a-entity gltf-model="#incenierario" position="74.793 14.597 23.782" scale="0.05 0.05 0.05"></a-entity>
    <a-entity gltf-model="#maniqui" position="-275.740 25.553 -163.154" scale="0.085 0.04 0.085"></a-entity>
    <a-entity gltf-model="#PolicromoBanderas" position="90.960 14 -2" rotate="90 90 0" scale="0.085 0.04 0.085"></a-entity>
    <a-entity gltf-model="#puntaflecha" position="90.960 14.655 -2" scale="0.2 0.2 0.2">
        <a-animation attribute="rotation" dur="3000" to="0 360 0" repeat="indefinite"></a-animation>
    </a-entity>
    <a-entity gltf-model="#ranchito" emissive="white" position="84 14.148 -24.468" scale="0.085 0.04 0.085"></a-entity>

    {{!-- Mensajes --}}
    <a-entity rotation="0 45 0" id="pyramid-text" mixin="slice" slice9="color:  #111; height: 0.55; width: 3.2; opacity: 0.7"
        text="color: #ffffff; align: center; value:la pirÃ¡mide principal de Cihuatan, mide 13 metros de altura y 50 metros de base; side: double; width: 3; zOffset: 0.01"
        position="-222.485 -10.831 -168.512"></a-entity>

    {{!-- Portals --}}
    {{> portal id="pyramid-portal"
    href="portals/pyramid.html"
    img="assets/img/portal/pyramid_small.jpg"
    name="Piramide"
    position="-225 -10 -163.606" }}

    {{> portal id="altar-portal"
    href="portals/altar.html"
    img="assets/img/portal/altar_small.jpg"
    name="Altar"
    position="86 16 6" }}

    {{> portal id="climb-portal"
    href="portals/climb.html"
    img="assets/img/portal/climb_small.jpg"
    name="Ascenso"
    position="27.745 -8 -289.920" }}

    {{> portal id="internal-field-portal"
    href="portals/internal-field.html"
    img="assets/img/portal/internal_field_small.jpg"
    name="Campo Interno"
    position="52.702 -3.129 -475.117" }}

    {{> portal id="museum-portal"
    href="portals/museum.html"
    img="assets/img/portal/museum_small.jpg"
    name="Museo"
    position="0 0 0" }}

    {{> portal id="outside-field1-portal"
    href="portals/outside-field1.html"
    img="assets/img/portal/outside_field1_small.jpg"
    name="Cancha fuera"
    position="-300 -4 14" }}

    {{> portal id="outside-field2-portal"
    href="portals/outside-field2.html"
    img="assets/img/portal/outside_field2_small.jpg"
    name="Cancha Afuera"
    position="-300 -4 19" }}

</a-scene>